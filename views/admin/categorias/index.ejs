<%- include ('../../partials/header.ejs'); %>
<body>
    <%- include ('../../partials/navbar.ejs'); %>
   <div class="container mt-4">
    <h1>Categorias</h1>
    <hr>
    <table class="table table-bordered">
      <thead>
       <tr><th>Id</th><th>Titulo</th><th>Slug</th><th>Ações</th></tr>
      </thead>
      <tbody>
        <% categorias.forEach( categoria => {  %>
            <tr><td><%= categoria.id%></td>
                <td><%= categoria.titulo%></td>
                <td><%= categoria.slug %></td>
                <td>
                  <form action="/admin/categorias/editar/<%= categoria.id %>" method="GET"    style="display: inline;">
                    <input type="hidden" name="id">
                  <button style=" margin-right: 2% ;" class="btn btn-warning btn-sm">Editar</button>
                </form>
                  <form action="/admin/categorias/deletar" method="post" style="display: inline;" onsubmit="EmpedirDelete(event, this)">
                    <input type="hidden" name="id" value="<%= categoria.id %>">
                    <button style="" class="btn btn-danger btn-sm">Deletar</button></form>
                </td>
                  
            </tr>
        <% }) %>
      </tbody>
    </table>
    <a href="/admin/categorias/new" class="btn btn-primary">Criar Categoria</a>
    </div>
   </div>
   <script>

     function EmpedirDelete(event, form){
       event.preventDefault() //impede o envio do pedido de delecao..
       var resposta = confirm('Você quer deletar mesmo esta categoria?')
       if(resposta){
           form.submit()
       }
     }
   </script>
</body>
<%- include ('../../partials/footer.ejs'); %>
